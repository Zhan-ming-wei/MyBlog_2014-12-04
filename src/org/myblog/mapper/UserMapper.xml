<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.myblog.model.UserVO">

	<resultMap id="userResultMap" type="user">
		<id property="id" column="id" />
		<result property="username" column="username" />
		<result property="userpwd" column="userpwd" />
		<result property="mail" column="mail" />
		<result property="phone" column="phone" />
		<result property="sex" column="sex" />
		<result property="birthday" column="birthday" />

		<result property="mailActive" column="mailActive" />
	</resultMap>


	<!-- 添加用户信息操作 -->
	<insert id="add" parameterType="user" useGeneratedKeys="true" keyProperty="id">
		insert into user(username,userpwd,mail,phone,sex,birthday,mailActive) values(#{username},#{userpwd},#{mail},#{phone},#{sex},#{birthday},#{mailActive})
	</insert>

	<!-- 用户的修改操作 -->
	<update id="update" parameterType="user">
		update user set username=#{username},userpwd=#{userpwd},mail=#{mail},phone=#{phone},sex=#{sex},birthday=#{birthday},mailActive=#{mailActive} where
		mail=#{mail}
	</update>


	<!-- 查询全部操作 -->
	<select id="findAll" resultMap="userResultMap">  <!-- 调用的是resultMap的影射关系，否则类中的字段必须与数据库中的字段相同 -->
		select * from user
	</select>


	<!-- 用户名是否存在 -->
	<select id="nameIsExist" resultType="int" parameterType="map">
		select count(*) from user where username=#{username}
	</select>

	<!-- 邮箱是否存在 -->
	<select id="mailIsExist" resultType="int" parameterType="map">
		select count(*) from user where mail=#{mail}
	</select>



	<!-- 根据邮箱获得对象 -->
	<select id="findByMail" resultType="user" parameterType="map">
		select * from user where mail = #{mail}
	</select>



</mapper>